/*! For license information please see bundle.45467c2937e1a4a60d25.js.LICENSE.txt */
(()=>{var t={10:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(537),o=n.n(r),i=n(645),a=n.n(i)()(o());a.push([t.id,".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n","",{version:3,sources:["webpack://./src/framework/view/abstract-view.css"],names:[],mappings:"AAAA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE;;IAEE,wBAAwB;EAC1B;;EAEA;;;;;IAKE,2BAA2B;EAC7B;;EAEA;;;;IAIE,0BAA0B;EAC5B;AACF",sourcesContent:[".shake {\n  animation: shake 0.6s;\n  position: relative;\n  z-index: 10;\n}\n\n@keyframes shake {\n  0%,\n  100% {\n    transform: translateX(0);\n  }\n\n  10%,\n  30%,\n  50%,\n  70%,\n  90% {\n    transform: translateX(-5px);\n  }\n\n  20%,\n  40%,\n  60%,\n  80% {\n    transform: translateX(5px);\n  }\n}\n"],sourceRoot:""}]);const c=a},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var u=this[c][0];null!=u&&(a[u]=!0)}for(var l=0;l<t.length;l++){var s=[].concat(t[l]);r&&a[s[0]]||(void 0!==i&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=i),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),o&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=o):s[4]="".concat(o)),e.push(s))}},e}},537:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */");return[e].concat([i]).join("\n")}return[e].join("\n")}},484:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",o="minute",i="hour",a="day",c="week",u="month",l="quarter",s="year",f="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},d=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},m={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+d(r,2,"0")+":"+d(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,u),i=n-o<0,a=e.clone().add(r+(i?-1:1),u);return+(-(r+(n-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:s,w:c,d:a,D:f,h:i,m:o,s:r,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",w={};w[b]=v;var g=function(t){return t instanceof S},_=function t(e,n,r){var o;if(!e)return b;if("string"==typeof e){var i=e.toLowerCase();w[i]&&(o=i),n&&(w[i]=n,o=i);var a=e.split("-");if(!o&&a.length>1)return t(a[0])}else{var c=e.name;w[c]=e,o=c}return!r&&o&&(b=o),o||!r&&b},O=function(t,e){if(g(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},j=m;j.l=_,j.i=g,j.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function v(t){this.$L=_(t.locale,null,!0),this.parse(t)}var d=v.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(j.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return j},d.isValid=function(){return!(this.$d.toString()===p)},d.isSame=function(t,e){var n=O(t);return this.startOf(e)<=n&&n<=this.endOf(e)},d.isAfter=function(t,e){return O(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<O(t)},d.$g=function(t,e,n){return j.u(t)?this[e]:this.set(n,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,e){var n=this,l=!!j.u(e)||e,p=j.p(t),h=function(t,e){var r=j.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return l?r:r.endOf(a)},y=function(t,e){return j.w(n.toDate()[t].apply(n.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},v=this.$W,d=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(p){case s:return l?h(1,0):h(31,11);case u:return l?h(1,d):h(0,d+1);case c:var w=this.$locale().weekStart||0,g=(v<w?v+7:v)-w;return h(l?m-g:m+(6-g),d);case a:case f:return y(b+"Hours",0);case i:return y(b+"Minutes",1);case o:return y(b+"Seconds",2);case r:return y(b+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(t,e){var c,l=j.p(t),p="set"+(this.$u?"UTC":""),h=(c={},c[a]=p+"Date",c[f]=p+"Date",c[u]=p+"Month",c[s]=p+"FullYear",c[i]=p+"Hours",c[o]=p+"Minutes",c[r]=p+"Seconds",c[n]=p+"Milliseconds",c)[l],y=l===a?this.$D+(e-this.$W):e;if(l===u||l===s){var v=this.clone().set(f,1);v.$d[h](y),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else h&&this.$d[h](y);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[j.p(t)]()},d.add=function(n,l){var f,p=this;n=Number(n);var h=j.p(l),y=function(t){var e=O(p);return j.w(e.date(e.date()+Math.round(t*n)),p)};if(h===u)return this.set(u,this.$M+n);if(h===s)return this.set(s,this.$y+n);if(h===a)return y(1);if(h===c)return y(7);var v=(f={},f[o]=t,f[i]=e,f[r]=1e3,f)[h]||1,d=this.$d.getTime()+n*v;return j.w(d,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=j.z(this),i=this.$H,a=this.$m,c=this.$M,u=n.weekdays,l=n.months,s=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].slice(0,i)},f=function(t){return j.s(i%12||12,t,"0")},h=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},v={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:j.s(c+1,2,"0"),MMM:s(n.monthsShort,c,l,3),MMMM:s(l,c),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:s(n.weekdaysMin,this.$W,u,2),ddd:s(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:j.s(i,2,"0"),h:f(1),hh:f(2),a:h(i,a,!0),A:h(i,a,!1),m:String(a),mm:j.s(a,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:o};return r.replace(y,(function(t,e){return e||v[t]||o.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(n,f,p){var h,y=j.p(f),v=O(n),d=(v.utcOffset()-this.utcOffset())*t,m=this-v,b=j.m(this,v);return b=(h={},h[s]=b/12,h[u]=b,h[l]=b/3,h[c]=(m-d)/6048e5,h[a]=(m-d)/864e5,h[i]=m/e,h[o]=m/t,h[r]=m/1e3,h)[y]||m,p?b:j.a(b)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return w[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=_(t,e,!0);return r&&(n.$L=r),n},d.clone=function(){return j.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},v}(),E=S.prototype;return O.prototype=E,[["$ms",n],["$s",r],["$m",o],["$H",i],["$W",a],["$M",u],["$y",s],["$D",f]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,S,O),t.$i=!0),O},O.locale=_,O.isDayjs=g,O.unix=function(t){return O(1e3*t)},O.en=w[b],O.Ls=w,O.p={},O}()},646:function(t){t.exports=function(){"use strict";var t,e,n=1e3,r=6e4,o=36e5,i=864e5,a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,u=2592e6,l=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,s={years:c,months:u,days:i,hours:o,minutes:r,seconds:n,milliseconds:1,weeks:6048e5},f=function(t){return t instanceof b},p=function(t,e,n){return new b(t,n,e.$l)},h=function(t){return e.p(t)+"s"},y=function(t){return t<0},v=function(t){return y(t)?Math.ceil(t):Math.floor(t)},d=function(t){return Math.abs(t)},m=function(t,e){return t?y(t)?{negative:!0,format:""+d(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},b=function(){function y(t,e,n){var r=this;if(this.$d={},this.$l=n,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return p(t*s[h(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){r.$d[h(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var o=t.match(l);if(o){var i=o.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=i[0],this.$d.months=i[1],this.$d.weeks=i[2],this.$d.days=i[3],this.$d.hours=i[4],this.$d.minutes=i[5],this.$d.seconds=i[6],this.calMilliseconds(),this}}return this}var d=y.prototype;return d.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,n){return e+(t.$d[n]||0)*s[n]}),0)},d.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=v(t/c),t%=c,this.$d.months=v(t/u),t%=u,this.$d.days=v(t/i),t%=i,this.$d.hours=v(t/o),t%=o,this.$d.minutes=v(t/r),t%=r,this.$d.seconds=v(t/n),t%=n,this.$d.milliseconds=t},d.toISOString=function(){var t=m(this.$d.years,"Y"),e=m(this.$d.months,"M"),n=+this.$d.days||0;this.$d.weeks&&(n+=7*this.$d.weeks);var r=m(n,"D"),o=m(this.$d.hours,"H"),i=m(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var c=m(a,"S"),u=t.negative||e.negative||r.negative||o.negative||i.negative||c.negative,l=o.format||i.format||c.format?"T":"",s=(u?"-":"")+"P"+t.format+e.format+r.format+l+o.format+i.format+c.format;return"P"===s||"-P"===s?"P0D":s},d.toJSON=function(){return this.toISOString()},d.format=function(t){var n=t||"YYYY-MM-DDTHH:mm:ss",r={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return n.replace(a,(function(t,e){return e||String(r[t])}))},d.as=function(t){return this.$ms/s[h(t)]},d.get=function(t){var e=this.$ms,n=h(t);return"milliseconds"===n?e%=1e3:e="weeks"===n?v(e/s[n]):this.$d[n],0===e?0:e},d.add=function(t,e,n){var r;return r=e?t*s[h(e)]:f(t)?t.$ms:p(t,this).$ms,p(this.$ms+r*(n?-1:1),this)},d.subtract=function(t,e){return this.add(t,e,!0)},d.locale=function(t){var e=this.clone();return e.$l=t,e},d.clone=function(){return p(this.$ms,this)},d.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},d.milliseconds=function(){return this.get("milliseconds")},d.asMilliseconds=function(){return this.as("milliseconds")},d.seconds=function(){return this.get("seconds")},d.asSeconds=function(){return this.as("seconds")},d.minutes=function(){return this.get("minutes")},d.asMinutes=function(){return this.as("minutes")},d.hours=function(){return this.get("hours")},d.asHours=function(){return this.as("hours")},d.days=function(){return this.get("days")},d.asDays=function(){return this.as("days")},d.weeks=function(){return this.get("weeks")},d.asWeeks=function(){return this.as("weeks")},d.months=function(){return this.get("months")},d.asMonths=function(){return this.as("months")},d.years=function(){return this.get("years")},d.asYears=function(){return this.as("years")},y}();return function(n,r,o){t=o,e=o().$utils(),o.duration=function(t,e){var n=o.locale();return p(t,{$l:n},e)},o.isDuration=f;var i=r.prototype.add,a=r.prototype.subtract;r.prototype.add=function(t,e){return f(t)&&(t=t.asMilliseconds()),i.bind(this)(t,e)},r.prototype.subtract=function(t,e){return f(t)&&(t=t.asMilliseconds()),a.bind(this)(t,e)}}}()},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],c=0;c<t.length;c++){var u=t[c],l=r.base?u[0]+r.base:u[0],s=i[l]||0,f="".concat(l," ").concat(s);i[l]=s+1;var p=n(f),h={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var y=o(h,r);r.byIndex=c,e.splice(c,0,{identifier:f,updater:y,references:1})}a.push(f)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var u=r(t,o),l=0;l<i.length;l++){var s=n(i[l]);0===e[s].references&&(e[s].updater(),e.splice(s,1))}i=u}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{"use strict";var t="afterbegin";function e(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"beforeend";if(!(t instanceof E))throw new Error("Can render only components");if(null===e)throw new Error("Container element doesn't exist");e.insertAdjacentElement(n,t.element)}function r(t){if(null!==t){if(!(t instanceof E))throw new Error("Can remove only components");t.element.remove(),t.removeElement()}}var o=n(379),i=n.n(o),a=n(795),c=n.n(a),u=n(569),l=n.n(u),s=n(565),f=n.n(s),p=n(216),h=n.n(p),y=n(589),v=n.n(y),d=n(10),m={};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===b(o)?o:String(o)),r)}var o}function g(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,O(t,e,"set"),n),n}function _(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,O(t,e,"get"))}function O(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}m.styleTagTransform=v(),m.setAttributes=f(),m.insert=l().bind(null,"head"),m.domAPI=c(),m.insertStyleElement=h(),i()(d.Z,m),d.Z&&d.Z.locals&&d.Z.locals;var j="shake",S=new WeakMap,E=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={writable:!0,value:null},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=this,n=S),n.set(e,r),(this instanceof t?this.constructor:void 0)===t)throw new Error("Can't instantiate AbstractView, only concrete one.");var e,n,r}var e,n;return e=t,(n=[{key:"element",get:function(){var t,e;return _(this,S)||g(this,S,(t=this.template,(e=document.createElement("div")).innerHTML=t,e.firstElementChild)),_(this,S)}},{key:"template",get:function(){throw new Error("Abstract method not implemented: get template")}},{key:"removeElement",value:function(){g(this,S,null)}},{key:"shake",value:function(t){var e=this;this.element.classList.add(j),setTimeout((function(){e.element.classList.remove(j),null==t||t()}),600)}}])&&w(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===P(o)?o:String(o)),r)}var o}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},M(t)}function C(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var L=new WeakMap,D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=M(r);if(o){var n=M(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return x(t)}(this,t)});function a(t){var e,n,r,o,c=t.rating;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),n=x(e=i.call(this)),o={writable:!0,value:null},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n,r=L),r.set(n,o),function(t,e,n){(function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}})(t,C(t,e,"set"),n)}(x(e),L,c),e}return e=a,(n=[{key:"template",get:function(){return t={rating:(this,e=L,function(t,e){return e.get?e.get.call(t):e.value}(this,C(this,e,"get")))},'<section class="header__profile profile">\n      <p class="profile__rating">'.concat(t.rating,'</p>\n      <img class="profile__avatar" src="images/bitmap@2x.png" alt="Avatar" width="35" height="35">\n    </section>');var t,e}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E),W={FAVORITE_BUTTON:"favorite",WATCHED_BUTTON:"watched",WATCHLIST_BUTTON:"watchlist"},R={STANDARD:"STANDARD",EXTENDS:"EXTENDS"},A="Basic dPy4sfS45wcl1sh6I",$="https://20.ecmascript.pages.academy/cinemaddict",I=n(484),B=n.n(I),F=n(646),N=n.n(F);function H(t){var e=B().duration(t,"minutes");return"".concat(e.hours(),"h ").concat(e.minutes(),"m")}function G(t,e){return B()(t).format(e)}function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Y(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Y(o)?o:String(o)),r)}var o}function z(t,e,n){q(t,e),e.set(t,n)}function q(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function V(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,X(t,e,"get"))}function K(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,X(t,e,"set"),n),n}function X(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}B().extend(N());var Z=new WeakMap,J=new WeakMap,Q=new WeakMap,tt=new WeakMap,et=new WeakMap,nt=new WeakSet,rt=function(){function t(e){var n,o=this,i=e.container,a=e.filmsModel;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),q(this,n=nt),n.add(this),z(this,Z,{writable:!0,value:null}),z(this,J,{writable:!0,value:null}),z(this,Q,{writable:!0,value:null}),z(this,tt,{writable:!0,value:null}),z(this,et,{writable:!0,value:function(){r(V(o,J)),o.init()}}),K(this,Z,i),K(this,Q,a),V(this,Q).addObserver(V(this,et))}var n,o;return n=t,(o=[{key:"init",value:function(){var t,n=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,nt,ot).call(this,V(this,Q).films);n&&(K(this,tt,0===(t=n)?"":t>=1&&t<=10?"Novice":t>=11&&t<=20?"Fan":"Movie Buff"),K(this,J,new D({rating:V(this,tt)})),e(V(this,J),V(this,Z)))}}])&&U(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function ot(t){return t.reduce((function(t,e){return e.userDetails.watched?t+1:t}),0)}function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==it(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===it(o)?o:String(o)),r)}var o}function ct(t,e){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ct(t,e)}function ut(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lt(t){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(t)}function st(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ft=new WeakMap,pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lt(r);if(o){var n=lt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===it(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ut(t)}(this,t)});function a(t){var e,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),n=ut(e=i.call(this)),o={writable:!0,value:null},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n,r=ft),r.set(n,o),function(t,e,n){(function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}})(t,st(t,e,"set"),n)}(ut(e),ft,t),e}return e=a,(n=[{key:"template",get:function(){return t={numberOfFilms:(this,e=ft,function(t,e){return e.get?e.get.call(t):e.value}(this,st(this,e,"get")))},"<p>".concat(t.numberOfFilms," movies inside</p>");var t,e}}])&&at(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function ht(t){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ht(t)}function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ht(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ht(o)?o:String(o)),r)}var o}function vt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function dt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,bt(t,e,"get"))}function mt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,bt(t,e,"set"),n),n}function bt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var wt=new WeakMap,gt=new WeakMap,_t=new WeakMap,Ot=function(){function t(e){var n=e.container,r=e.filmsModel;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),vt(this,wt,{writable:!0,value:null}),vt(this,gt,{writable:!0,value:null}),vt(this,_t,{writable:!0,value:null}),mt(this,wt,n),mt(this,gt,r)}var n,r;return n=t,(r=[{key:"init",value:function(){mt(this,_t,new pt(dt(this,gt).films.length)),e(dt(this,_t),dt(this,wt))}}])&&yt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==jt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===jt(o)?o:String(o)),r)}var o}function Et(t,e){var n=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,n)}var Pt=new WeakMap,kt=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,n=Pt,r={writable:!0,value:new Set},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,n),n.set(e,r)}var e,n;return e=t,(n=[{key:"addObserver",value:function(t){Et(this,Pt).add(t)}},{key:"removeObserver",value:function(t){Et(this,Pt).delete(t)}},{key:"_notify",value:function(t,e){Et(this,Pt).forEach((function(n){return n(t,e)}))}}])&&St(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function xt(t){return function(t){if(Array.isArray(t))return Mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ct(){Ct=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new E(o||[]);return r(a,"_invoke",{value:_(t,n,c)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function h(){}function y(){}var v={};u(v,i,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(P([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,a,c){var u=s(t[r],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Tt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(g.prototype),u(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Lt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Dt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Lt(i,r,o,a,c,"next",t)}function c(t){Lt(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Tt(o)?o:String(o)),r)}var o}function Rt(t,e){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rt(t,e)}function At(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $t(t){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$t(t)}function It(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Bt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Nt(t,e,"get"))}function Ft(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Nt(t,e,"set"),n),n}function Nt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ht=new WeakMap,Gt=new WeakMap,Yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rt(t,e)}(u,t);var e,n,r,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$t(i);if(a){var n=$t(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return At(t)}(this,t)});function u(t){var e,n=t.filmsApiService;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),It(At(e=c.call(this)),Ht,{writable:!0,value:[]}),It(At(e),Gt,{writable:!0,value:null}),Ft(At(e),Gt,n),e}return e=u,n=[{key:"init",value:(o=Dt(Ct().mark((function t(){var e;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Bt(this,Gt).films;case 2:e=t.sent,Ft(this,Ht,e.map(Bt(this,Gt).adaptToClient));case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"update",value:(r=Dt(Ct().mark((function t(e){var n,r,o;return Ct().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Bt(this,Ht).findIndex((function(t){return t.id===e.id})),t.next=3,Bt(this,Gt).updateUserDetails(e);case 3:r=t.sent,o=Bt(this,Gt).adaptToClient(r),Ft(this,Ht,[].concat(xt(Bt(this,Ht).slice(0,n)),[o],xt(Bt(this,Ht).slice(n+1)))),this._notify("UPDATE_FILM",this.films[n]);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"films",get:function(){return Bt(this,Ht)}},{key:"getSortingFilms",value:function(t){Ft(this,Ht,structuredClone(Bt(this,Ht)).sort(t))}},{key:"getFilterFilms",value:function(t){return structuredClone(this.films).filter(t)}}],n&&Wt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(kt);function Ut(t){return Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ut(t)}function zt(){zt=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new E(o||[]);return r(a,"_invoke",{value:_(t,n,c)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function h(){}function y(){}var v={};u(v,i,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(P([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,a,c){var u=s(t[r],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Ut(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(g.prototype),u(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function qt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Ut(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Ut(o)?o:String(o)),r)}var o}var Kt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._endPoint=e,this._authorization=n}var e,n,r,o,i;return e=t,n=[{key:"_load",value:(o=zt().mark((function e(n){var r,o,i,a,c,u,l,s;return zt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.url,o=n.method,i=void 0===o?"GET":o,a=n.body,c=void 0===a?null:a,u=n.headers,(l=void 0===u?new Headers:u).append("Authorization",this._authorization),e.next=4,fetch("".concat(this._endPoint,"/").concat(r),{method:i,body:c,headers:l});case 4:return s=e.sent,e.prev=5,t.checkStatus(s),e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(5),t.catchError(e.t0);case 13:case"end":return e.stop()}}),e,this,[[5,10]])})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){qt(i,n,r,a,c,"next",t)}function c(t){qt(i,n,r,a,c,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})}],r=[{key:"parseResponse",value:function(t){return t.json()}},{key:"checkStatus",value:function(t){if(!t.ok)throw new Error("".concat(t.status,": ").concat(t.statusText))}},{key:"catchError",value:function(t){throw t}}],n&&Vt(e.prototype,n),r&&Vt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach((function(e){Qt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qt(t,e,n){return(e=re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function te(){te=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new E(o||[]);return r(a,"_invoke",{value:_(t,n,c)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function h(){}function y(){}var v={};u(v,i,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(P([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,a,c){var u=s(t[r],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Xt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(g.prototype),u(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function ee(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,re(r.key),r)}}function re(t){var e=function(t,e){if("object"!==Xt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Xt(e)?e:String(e)}function oe(t,e){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oe(t,e)}function ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ae(t){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ae(t)}function ce(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}var ue=new WeakSet,le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oe(t,e)}(u,t);var e,n,r,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ae(i);if(a){var n=ae(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ie(t)}(this,t)});function u(){var t,e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=ie(t=c.call.apply(c,[this].concat(o))),n=ue),n.add(e),t}return e=u,n=[{key:"films",get:function(){return this._load({url:"movies"}).then(Kt.parseResponse)}},{key:"updateUserDetails",value:(r=te().mark((function t(e){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._load({url:"movies/".concat(e.id),method:"PUT",body:JSON.stringify(ce(this,ue,se).call(this,e)),headers:new Headers({"Content-Type":"application/json"})});case 2:return n=t.sent,t.next=5,Kt.parseResponse(n);case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){ee(i,n,o,a,c,"next",t)}function c(t){ee(i,n,o,a,c,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"adaptToClient",value:function(t){var e=t.film_info,n=e.release,r=t.user_details,o=Jt(Jt({},n),{},{releaseCountry:n.release_country});delete o.release_country;var i=Jt(Jt({},e),{},{alternativeTitle:e.alternative_title,totalRating:e.total_rating,ageRating:e.age_rating,release:o});delete i.alternative_title,delete i.total_rating,delete i.age_rating;var a=Jt(Jt({},r),{},{watched:r.already_watched,watchingDate:r.watching_date});delete a.already_watched,delete a.watching_date;var c=Jt(Jt({},t),{},{filmInfo:i,userDetails:a});return delete c.film_info,delete c.user_details,c}}],n&&ne(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(Kt);function se(t){return{id:t.id,film_info:{title:t.filmInfo.title,alternative_title:t.filmInfo.alternativeTitle,description:t.filmInfo.description,total_rating:t.filmInfo.totalRating,poster:t.filmInfo.poster,age_rating:t.filmInfo.ageRating,director:t.filmInfo.director,writers:t.filmInfo.writers,actors:t.filmInfo.actors,genre:t.filmInfo.genre,duration:t.filmInfo.duration,release:{date:t.filmInfo.release.date,release_country:t.filmInfo.release.releaseCountry}},user_details:{watchlist:t.userDetails.watchlist,already_watched:t.userDetails.watched,watching_date:t.userDetails.watchingDate,favorite:t.userDetails.favorite},comments:t.comments}}function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==fe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===fe(o)?o:String(o)),r)}var o}function he(t,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},he(t,e)}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ye(t)}var ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&he(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ye(r);if(o){var n=ye(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"template",get:function(){return'\n    <section class="films">\n      <section class="films-list">\n        <h2 class="films-list__title visually-hidden">All movies. Upcoming</h2>\n        <div class="films-list__container">\n\n        </div>\n      </section>\n    </section>\n  '}},{key:"containerFilms",get:function(){return this.element.querySelector(".films-list__container")}},{key:"containerShowMoreButton",get:function(){return this.element.querySelector(".films-list")}}])&&pe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_e(r.key),r)}}function be(t,e){return be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},be(t,e)}function we(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ge(t)}function _e(t){var e=function(t,e){if("object"!==de(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==de(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===de(e)?e:String(e)}function Oe(t,e,n){je(t,e),e.set(t,n)}function je(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Se(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Pe(t,e,"get"))}function Ee(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Pe(t,e,"set"),n),n}function Pe(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ke=new WeakMap,Te=new WeakMap,xe=new WeakMap,Me=new WeakSet,Ce=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&be(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ge(r);if(o){var n=ge(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return we(t)}(this,t)});function a(t){var e,n,r,o=t.film,c=t.onContentCardClick;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),je(n=we(e=i.call(this)),r=Me),r.add(n),Oe(we(e),ke,{writable:!0,value:null}),Oe(we(e),Te,{writable:!0,value:null}),Oe(we(e),xe,{writable:!0,value:null}),function(t,e,n){(e=_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(we(e),"onContentCardClick",(function(t){t.preventDefault(),Se(we(e),xe).call(we(e))})),Ee(we(e),ke,o),Ee(we(e),Te,e.element.querySelector(".film-card > a")),Ee(we(e),xe,c),function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(we(e),Me,Le).call(we(e)),e}return e=a,(n=[{key:"template",get:function(){return t=Se(this,ke),e=new Date(t.filmInfo.release.date).getFullYear(),n=H(t.filmInfo.duration),r=function(t){return t.length>140?"".concat(t.substring(0,139),"&hellip;"):t}(t.filmInfo.description),'\n    <article class="film-card">\n      <a class="film-card__link">\n        <h3 class="film-card__title">'.concat(t.filmInfo.title,'</h3>\n        <p class="film-card__rating">').concat(t.filmInfo.totalRating,'</p>\n        <p class="film-card__info">\n          <span class="film-card__year">').concat(e,'</span>\n          <span class="film-card__duration">').concat(n,'</span>\n          <span class="film-card__genre">').concat(t.filmInfo.genre[0],'</span>\n        </p>\n        <img src="').concat(t.filmInfo.poster,'" alt="" class="film-card__poster">\n        <p class="film-card__description">').concat(r,'</p>\n        <span class="film-card__comments">').concat(t.comments.length,' comments</span>\n      </a>\n      <div class="film-card__controls">\n      </div>\n    </article>\n  ');var t,e,n,r}},{key:"controlButtonContainer",get:function(){return this.element.querySelector(".film-card__controls")}}])&&me(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function Le(){Se(this,Te).addEventListener("click",this.onContentCardClick)}function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function We(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?We(Object(n),!0).forEach((function(e){Fe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ne(r.key),r)}}function $e(t,e){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$e(t,e)}function Ie(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Be(t){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Be(t)}function Fe(t,e,n){return(e=Ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ne(t){var e=function(t,e){if("object"!==De(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==De(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===De(e)?e:String(e)}var He=new WeakSet,Ge=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$e(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Be(r);if(o){var n=Be(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===De(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ie(t)}(this,t)});function a(){var t,e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=Ie(t=i.call.apply(i,[this].concat(o))),n=He),n.add(e),Fe(Ie(t),"_state",{}),t}return e=a,(n=[{key:"updateElement",value:function(t){t&&(this._setState(t),function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(this,He,Ye).call(this))}},{key:"_restoreHandlers",value:function(){throw new Error("Abstract method not implemented: restoreHandlers")}},{key:"_setState",value:function(t){this._state=structuredClone(Re(Re({},this._state),t))}}])&&Ae(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function Ye(){var t=this.element,e=t.parentElement;this.removeElement();var n=this.element;e.replaceChild(n,t),this._restoreHandlers()}function Ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ze(t){var e=t.state,n=e.filmInfo.writers.join(", "),r=e.filmInfo.actors.join(", "),o=H(e.filmInfo.duration),i=e.filmInfo.genre.length>1?"Genres":"Genre",a=function(t){var e,n="",r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ue(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n+='<span class="film-details__genre">'.concat(o,"</span>")}}catch(t){r.e(t)}finally{r.f()}return n}(e.filmInfo.genre),c=G(e.filmInfo.release.date,"DD MMMM YYYY");return'\n    <section class="film-details">\n      <div class="film-details__inner">\n        <div class="film-details__top-container">\n          <div class="film-details__close">\n            <button class="film-details__close-btn" type="button">close</button>\n          </div>\n          <div class="film-details__info-wrap">\n            <div class="film-details__poster">\n              <img class="film-details__poster-img" src="'.concat(e.filmInfo.poster,'" alt="">\n\n              <p class="film-details__age">').concat(e.filmInfo.ageRating,'+</p>\n            </div>\n\n            <div class="film-details__info">\n              <div class="film-details__info-head">\n                <div class="film-details__title-wrap">\n                  <h3 class="film-details__title">').concat(e.filmInfo.title,'</h3>\n                  <p class="film-details__title-original">Original: ').concat(e.filmInfo.alternativeTitle,'</p>\n                </div>\n\n                <div class="film-details__rating">\n                  <p class="film-details__total-rating">').concat(e.filmInfo.totalRating,'</p>\n                </div>\n              </div>\n\n              <table class="film-details__table">\n                <tr class="film-details__row">\n                  <td class="film-details__term">Director</td>\n                  <td class="film-details__cell">').concat(e.filmInfo.director,'</td>\n                </tr>\n                <tr class="film-details__row">\n                  <td class="film-details__term">Writers</td>\n                  <td class="film-details__cell">').concat(n,'</td>\n                </tr>\n                <tr class="film-details__row">\n                  <td class="film-details__term">Actors</td>\n                  <td class="film-details__cell">').concat(r,'</td>\n                </tr>\n                <tr class="film-details__row">\n                  <td class="film-details__term">Release Date</td>\n                  <td class="film-details__cell">').concat(c,'</td>\n                </tr>\n                <tr class="film-details__row">\n                  <td class="film-details__term">Duration</td>\n                  <td class="film-details__cell">').concat(o,'</td>\n                </tr>\n                <tr class="film-details__row">\n                  <td class="film-details__term">Country</td>\n                  <td class="film-details__cell">').concat(e.filmInfo.release.releaseCountry,'</td>\n                </tr>\n                <tr class="film-details__row">\n                  <td class="film-details__term">').concat(i,'</td>\n                  <td class="film-details__cell">\n                    ').concat(a,'\n                  </td>\n                </tr>\n              </table>\n\n              <p class="film-details__film-description">\n                ').concat(e.filmInfo.description,'\n              </p>\n            </div>\n          </div>\n\n          <section class="film-details__controls">\n          </section>\n        </div>\n\n        <div class="film-details__bottom-container">\n\n        </div>\n      </div>\n    </section>\n  ')}function qe(t){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qe(t)}function Ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(n),!0).forEach((function(e){Xe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xe(t,e,n){return(e=Je(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Je(r.key),r)}}function Je(t){var e=function(t,e){if("object"!==qe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==qe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===qe(e)?e:String(e)}function Qe(t,e){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qe(t,e)}function tn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function en(t){return en=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},en(t)}function nn(t,e){on(t,e),e.add(t)}function rn(t,e,n){on(t,e),e.set(t,n)}function on(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function an(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,un(t,e,"get"))}function cn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,un(t,e,"set"),n),n}function un(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ln=new WeakMap,sn=new WeakMap,fn=new WeakMap,pn=new WeakSet,hn=new WeakSet,yn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=en(r);if(o){var n=en(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tn(t)}(this,t)});function a(t){var e,n=t.film,r=t.comments,o=t.onPopupCloseButtonClick;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),nn(tn(e=i.call(this)),hn),nn(tn(e),pn),rn(tn(e),ln,{writable:!0,value:null}),rn(tn(e),sn,{writable:!0,value:null}),rn(tn(e),fn,{writable:!0,value:function(t){t.preventDefault(),an(tn(e),sn).call(tn(e))}}),e._state=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(tn(e),pn,vn).call(tn(e),{film:n,comments:r}),cn(tn(e),sn,o),e.init(),e}return e=a,(n=[{key:"init",value:function(){this._restoreHandlers()}},{key:"template",get:function(){return ze({state:this._state})}},{key:"controlButtonContainer",get:function(){return this.element.querySelector(".film-details__controls")}},{key:"commentsListContainer",get:function(){return this.element.querySelector(".film-details__bottom-container")}},{key:"_restoreHandlers",value:function(){cn(this,ln,this.element.querySelector(".film-details__close-btn")),an(this,ln).addEventListener("click",an(this,fn))}}])&&Ze(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ge);function vn(t){var e=t.film,n=t.comments;return Ke(Ke({},structuredClone(e)),{},{comments:structuredClone(n)})}function dn(t,e){var n="";if(e===R.EXTENDS)switch(t){case W.WATCHLIST_BUTTON:n="Add to watchlist";break;case W.WATCHED_BUTTON:n="Already watched";break;case W.FAVORITE_BUTTON:n="Add to favorites"}else if(e===R.STANDARD)switch(t){case W.WATCHLIST_BUTTON:n="Add to watchlist";break;case W.WATCHED_BUTTON:n="Mark as watched";break;case W.FAVORITE_BUTTON:n="Mark as favorite"}return n}function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function bn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?bn(Object(n),!0).forEach((function(e){gn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gn(t,e,n){return(e=On(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,On(r.key),r)}}function On(t){var e=function(t,e){if("object"!==mn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===mn(e)?e:String(e)}function jn(t,e){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jn(t,e)}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function En(t){return En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},En(t)}function Pn(t,e,n){kn(t,e),e.set(t,n)}function kn(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tn(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Mn(t,e,"get"))}function xn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Mn(t,e,"set"),n),n}function Mn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Cn=new WeakMap,Ln=new WeakMap,Dn=new WeakMap,Wn=new WeakMap,Rn=new WeakMap,An=new WeakSet,$n=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jn(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=En(r);if(o){var n=En(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===mn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Sn(t)}(this,t)});function a(t){var e,n,r,o=t.film,c=t.buttonType,u=t.viewType,l=t.handleControlButtonClick;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),kn(n=Sn(e=i.call(this)),r=An),r.add(n),Pn(Sn(e),Cn,{writable:!0,value:null}),Pn(Sn(e),Ln,{writable:!0,value:null}),Pn(Sn(e),Dn,{writable:!0,value:null}),Pn(Sn(e),Wn,{writable:!0,value:null}),Pn(Sn(e),Rn,{writable:!0,value:function(t){switch(t.preventDefault(),Tn(Sn(e),Cn)){case W.WATCHLIST_BUTTON:Tn(Sn(e),Dn).call(Sn(e),wn(wn({},Tn(Sn(e),Wn)),{},{userDetails:{watched:Tn(Sn(e),Wn).userDetails.watched,watchingDate:Tn(Sn(e),Wn).userDetails.watchingDate,favorite:Tn(Sn(e),Wn).userDetails.favorite,watchlist:!e._state.watchlist}}));break;case W.FAVORITE_BUTTON:Tn(Sn(e),Dn).call(Sn(e),wn(wn({},Tn(Sn(e),Wn)),{},{userDetails:{watched:Tn(Sn(e),Wn).userDetails.watched,watchingDate:Tn(Sn(e),Wn).userDetails.watchingDate,favorite:!e._state.favorite,watchlist:Tn(Sn(e),Wn).userDetails.watchlist}}));break;case W.WATCHED_BUTTON:Tn(Sn(e),Dn).call(Sn(e),wn(wn({},Tn(Sn(e),Wn)),{},{userDetails:{watched:!e._state.watched,watchingDate:e._state.watched?null:new Date,favorite:Tn(Sn(e),Wn).userDetails.favorite,watchlist:Tn(Sn(e),Wn).userDetails.watchlist}}))}}}),xn(Sn(e),Cn,c),xn(Sn(e),Ln,u),xn(Sn(e),Wn,o),e._state=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(Sn(e),An,In).call(Sn(e),o),xn(Sn(e),Dn,l),e.init(),e}return e=a,(n=[{key:"init",value:function(){this._restoreHandlers()}},{key:"_restoreHandlers",value:function(){this.element.addEventListener("click",Tn(this,Rn))}},{key:"template",get:function(){return function(t){var e=t.state,n=t.templateType;if(n===R.EXTENDS){var r=e[e.type]?"film-details__control-button--active":"",o=dn(e.type,R.EXTENDS);return'\n        <button\n            type="button"\n            class="film-details__control-button film-details__control-button--'.concat(e.type," ").concat(r,'"\n            id="').concat(e.type,'"\n            name="').concat(e.type,'">\n            ').concat(o,"\n        </button>")}if(n===R.STANDARD){var i=e[e.type]?"film-card__controls-item--active":"",a=dn(e.type,R.STANDARD),c=function(t){var e="";switch(t){case W.WATCHLIST_BUTTON:e="film-card__controls-item--add-to-watchlist";break;case W.WATCHED_BUTTON:e="film-card__controls-item--mark-as-watched";break;case W.FAVORITE_BUTTON:e="film-card__controls-item--favorite"}return e}(e.type);return'\n        <button\n            type="button"\n            class="film-card__controls-item '.concat(c," ").concat(i,'">\n            ').concat(a,"\n        </button>")}}({state:this._state,templateType:Tn(this,Ln)})}}])&&_n(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ge);function In(t){var e,n=(gn(e={},Tn(this,Cn),t.userDetails[Tn(this,Cn)]),gn(e,"type",Tn(this,Cn)),e);return t.userDetails[Tn(this,Cn)]===W.WATCHED_BUTTON?wn(wn({},n),{},{watchingDate:t.userDetails.watchingDate}):n}function Bn(t){return Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Bn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Bn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Bn(o)?o:String(o)),r)}var o}function Nn(t,e){return Nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nn(t,e)}function Hn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gn(t){return Gn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gn(t)}function Yn(t,e,n){Un(t,e),e.set(t,n)}function Un(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zn(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Vn(t,e,"get"))}function qn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Vn(t,e,"set"),n),n}function Vn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Kn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,tr=new WeakMap,er=new WeakMap,nr=new WeakMap,rr=new WeakMap,or=new WeakSet,ir=new WeakMap,ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nn(t,e)}(c,t);var n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gn(o);if(i){var n=Gn(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Bn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hn(t)}(this,t)});function c(t){var e,n,r,o=t.container,i=t.filmsModel,u=t.film,l=t.type,s=t.handleFilmControlButtonClick;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Un(n=Hn(e=a.call(this)),r=or),r.add(n),Yn(Hn(e),Kn,{writable:!0,value:null}),Yn(Hn(e),Xn,{writable:!0,value:null}),Yn(Hn(e),Zn,{writable:!0,value:null}),Yn(Hn(e),Jn,{writable:!0,value:null}),Yn(Hn(e),Qn,{writable:!0,value:null}),Yn(Hn(e),tr,{writable:!0,value:null}),Yn(Hn(e),er,{writable:!0,value:null}),Yn(Hn(e),nr,{writable:!0,value:null}),Yn(Hn(e),rr,{writable:!0,value:function(t,n){"UPDATE_FILM"===t&&zn(Hn(e),Zn).id===n.id&&(qn(Hn(e),Zn,n),function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(Hn(e),or,cr).call(Hn(e)),e.init())}}),Yn(Hn(e),ir,{writable:!0,value:function(t){zn(Hn(e),nr).call(Hn(e),t)}}),qn(Hn(e),Kn,o),qn(Hn(e),Xn,i),qn(Hn(e),Zn,u),qn(Hn(e),Jn,l),qn(Hn(e),nr,s),zn(Hn(e),Xn).addObserver(zn(Hn(e),rr)),e}return n=c,(r=[{key:"init",value:function(){qn(this,Qn,new $n({film:zn(this,Zn),buttonType:W.WATCHLIST_BUTTON,viewType:zn(this,Jn),handleControlButtonClick:zn(this,ir)})),qn(this,tr,new $n({film:zn(this,Zn),buttonType:W.WATCHED_BUTTON,viewType:zn(this,Jn),handleControlButtonClick:zn(this,ir)})),qn(this,er,new $n({film:zn(this,Zn),buttonType:W.FAVORITE_BUTTON,viewType:zn(this,Jn),handleControlButtonClick:zn(this,ir)})),e(zn(this,Qn),zn(this,Kn)),e(zn(this,tr),zn(this,Kn)),e(zn(this,er),zn(this,Kn))}}])&&Fn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),c}(kt);function cr(){r(zn(this,Qn)),r(zn(this,er)),r(zn(this,tr))}function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ur(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ur(o)?o:String(o)),r)}var o}function sr(t,e){return sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sr(t,e)}function fr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pr(t){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pr(t)}var hr=new WeakMap,yr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=pr(r);if(o){var n=pr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ur(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fr(t)}(this,t)});function a(t){var e,n,r,o,c=t.comments;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),n=fr(e=i.call(this)),o={writable:!0,value:null},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n,r=hr),r.set(n,o),function(t,e,n){var r=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.get(t)}(t,e);(function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}})(t,r,n)}(fr(e),hr,c),e}return e=a,(n=[{key:"template",get:function(){return'\n      <section class="film-details__comments-wrap">\n        <ul class="film-details__comments-list">\n        </ul>\n      </section>'}},{key:"commentsContainer",get:function(){return this.element.querySelector(".film-details__comments-list")}},{key:"filmAddCommentFormContainer",get:function(){return this.element}}])&&lr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function vr(t){return vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(t)}function dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==vr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===vr(o)?o:String(o)),r)}var o}function mr(t,e){return mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mr(t,e)}function br(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wr(t){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wr(t)}function gr(t,e,n){_r(t,e),e.set(t,n)}function _r(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Or(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Sr(t,e,"get"))}function jr(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Sr(t,e,"set"),n),n}function Sr(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Er=new WeakMap,Pr=new WeakMap,kr=new WeakSet,Tr=new WeakMap,xr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wr(r);if(o){var n=wr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===vr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return br(t)}(this,t)});function a(t){var e,n,r,o=t.comment,c=t.handleCommentDeleteButtonClick;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),_r(n=br(e=i.call(this)),r=kr),r.add(n),gr(br(e),Er,{writable:!0,value:null}),gr(br(e),Pr,{writable:!0,value:null}),gr(br(e),Tr,{writable:!0,value:function(t){t.preventDefault(),Or(br(e),Pr).call(br(e),Or(br(e),Er).id)}}),jr(br(e),Er,o),jr(br(e),Pr,c),function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(br(e),kr,Mr).call(br(e)),e}return e=a,(n=[{key:"template",get:function(){return e=G((t=Or(this,Er)).date,"YYYY/MM/DD HH:mm"),'\n      <li class="film-details__comment" id="'.concat(t.id,'">\n        <span class="film-details__comment-emoji">\n          <img src="./images/emoji/').concat(t.emotion,'.png" width="55" height="55" alt="emoji-').concat(t.emotion,'">\n        </span>\n        <div>\n          <p class="film-details__comment-text">').concat(t.comment,'</p>\n          <p class="film-details__comment-info">\n            <span class="film-details__comment-author">').concat(t.author,'</span>\n            <span class="film-details__comment-day">').concat(e,'</span>\n            <button class="film-details__comment-delete">Delete</button>\n          </p>\n        </div>\n      </li>');var t,e}}])&&dr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function Mr(){this.element.querySelector(".film-details__comment-delete").addEventListener("click",Or(this,Tr))}function Cr(t){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cr(t)}function Lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wr(r.key),r)}}function Wr(t){var e=function(t,e){if("object"!==Cr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Cr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Cr(e)?e:String(e)}function Rr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ar(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ir(t,e,"get"))}function $r(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ir(t,e,"set"),n),n}function Ir(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Br=new WeakMap,Fr=new WeakMap,Nr=new WeakMap,Hr=new WeakMap,Gr=new WeakMap,Yr=new WeakMap,Ur=new WeakMap,zr=function(){function t(n){var o,i,a,c=this,u=n.container,l=n.commentsModel,s=n.comments;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Rr(this,Br,{writable:!0,value:null}),Rr(this,Fr,{writable:!0,value:[]}),Rr(this,Nr,{writable:!0,value:null}),Rr(this,Hr,{writable:!0,value:new Map}),Rr(this,Gr,{writable:!0,value:function(t){Ar(c,Nr).deleteComment(t)}}),Rr(this,Yr,{writable:!0,value:function(t,n){"ADD_COMMENT"===t&&n.forEach((function(t,n){if(!Ar(c,Hr).has(n)){var r=new xr({comment:t,handleCommentDeleteButtonClick:Ar(c,Gr)});Ar(c,Hr).set(t.id,r),e(r,Ar(c,Br)),Ar(c,Fr).push(t)}}))}}),Rr(this,Ur,{writable:!0,value:function(t,e){"DELETE_COMMENT"===t&&(r(Ar(c,Hr).get(e)),Ar(c,Hr).delete(e))}}),o=this,a=function(){Ar(c,Nr).removeObserver(Ar(c,Ur))},(i=Wr(i="removeObserver"))in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,$r(this,Br,u),$r(this,Nr,l),$r(this,Fr,s),Ar(this,Nr).addObserver(Ar(this,Ur)),Ar(this,Nr).addObserver(Ar(this,Yr))}var n,o;return n=t,(o=[{key:"init",value:function(){var t,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Lr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Lr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(Ar(this,Fr));try{for(n.s();!(t=n.n()).done;){var r=t.value,o=new xr({comment:r,handleCommentDeleteButtonClick:Ar(this,Gr)});Ar(this,Hr).set(r.id,o),e(o,Ar(this,Br))}}catch(t){n.e(t)}finally{n.f()}}}])&&Dr(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jr(r.key),r)}}function Kr(t,e){return Kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kr(t,e)}function Xr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zr(t){return Zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zr(t)}function Jr(t){var e=function(t,e){if("object"!==qr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===qr(e)?e:String(e)}function Qr(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function to(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,eo(t,e,"get"))}function eo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var no=new WeakMap,ro=new WeakMap,oo=new WeakMap,io=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kr(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Zr(r);if(o){var n=Zr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===qr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xr(t)}(this,t)});function a(t){var e,n,r,o,c=t.handleEnterCommentKeydown;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),Qr(Xr(e=i.call(this)),no,{writable:!0,value:null}),Qr(Xr(e),ro,{writable:!0,value:null}),Qr(Xr(e),oo,{writable:!0,value:function(t){t.preventDefault(),e.updateElement({emotion:t.target.value})}}),n=Xr(e),o=function(){to(Xr(e),ro).call(Xr(e),e._state)},(r=Jr(r="handleEnterCommentFormKeydown"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,e._state={emotion:null,comment:"text"},e._restoreHandlers(),function(t,e,n){(function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}})(t,eo(t,e,"set"),n)}(Xr(e),ro,c),e}return e=a,(n=[{key:"template",get:function(){return t=this._state,'\n        <form class="film-details__new-comment" action="" method="get">\n          <div class="film-details__add-emoji-label">'.concat(function(t){return null===t.emotion?"":'<img src="./images/emoji/'.concat(t.emotion,'.png" width="55" height="55" alt="emoji">')}(t),'</div>\n\n          <label class="film-details__comment-label">\n            <textarea class="film-details__comment-input" placeholder="Select reaction below and write comment here" name="comment">Great movie!</textarea>\n          </label>\n\n          <div class="film-details__emoji-list">\n            <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-smile" value="smile">\n            <label class="film-details__emoji-label" for="emoji-smile">\n              <img src="./images/emoji/smile.png" width="30" height="30" alt="emoji">\n            </label>\n\n            <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-sleeping" value="sleeping">\n            <label class="film-details__emoji-label" for="emoji-sleeping">\n              <img src="./images/emoji/sleeping.png" width="30" height="30" alt="emoji">\n            </label>\n\n            <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-puke" value="puke">\n            <label class="film-details__emoji-label" for="emoji-puke">\n              <img src="./images/emoji/puke.png" width="30" height="30" alt="emoji">\n            </label>\n\n            <input class="film-details__emoji-item visually-hidden" name="comment-emoji" type="radio" id="emoji-angry" value="angry">\n            <label class="film-details__emoji-label" for="emoji-angry">\n              <img src="./images/emoji/angry.png" width="30" height="30" alt="emoji">\n            </label>\n          </div>\n        </form>');var t}},{key:"_restoreHandlers",value:function(){this.element.querySelector(".film-details__emoji-list").addEventListener("change",to(this,oo))}}])&&Vr(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ge);function ao(t){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(t)}function co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uo(r.key),r)}}function uo(t){var e=function(t,e){if("object"!==ao(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ao(e)?e:String(e)}function lo(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function so(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,po(t,e,"get"))}function fo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,po(t,e,"set"),n),n}function po(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ho=new WeakMap,yo=new WeakMap,vo=new WeakMap,mo=new WeakMap,bo=new WeakMap,wo=function(){function t(e){var n,r,o,i=this,a=e.container,c=e.commentsModel,u=e.filmId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),lo(this,ho,{writable:!0,value:null}),lo(this,yo,{writable:!0,value:null}),lo(this,vo,{writable:!0,value:null}),lo(this,mo,{writable:!0,value:null}),lo(this,bo,{writable:!0,value:function(t){so(i,yo).addComment({filmId:so(i,vo),comment:t})}}),n=this,o=function(){so(i,mo).handleEnterCommentFormKeydown()},(r=uo(r="handleEnterCommentFormKeydown"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,fo(this,ho,a),fo(this,yo,c),fo(this,vo,u)}var n,r;return n=t,(r=[{key:"init",value:function(){fo(this,mo,new io({handleEnterCommentKeydown:so(this,bo)})),e(so(this,mo),so(this,ho))}}])&&co(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function go(t){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(t)}function _o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==go(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==go(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===go(o)?o:String(o)),r)}var o}function Oo(t,e){return Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Oo(t,e)}function jo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function So(t){return So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},So(t)}function Eo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Po=new WeakMap,ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oo(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=So(r);if(o){var n=So(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===go(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jo(t)}(this,t)});function a(t){var e,n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),n=jo(e=i.call(this)),o={writable:!0,value:null},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n,r=Po),r.set(n,o),function(t,e,n){(function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}})(t,Eo(t,e,"set"),n)}(jo(e),Po,t),e}return e=a,(n=[{key:"template",get:function(){return t=function(t,e){return e.get?e.get.call(t):e.value}(this,Eo(this,Po,"get")),'<h3 class="film-details__comments-title">Comments <span class="film-details__comments-count">'.concat(t,"</span></h3>");var t}}])&&_o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function To(t){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},To(t)}function xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==To(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==To(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===To(o)?o:String(o)),r)}var o}function Mo(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Co(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Do(t,e,"get"))}function Lo(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Do(t,e,"set"),n),n}function Do(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Wo=new WeakMap,Ro=new WeakMap,Ao=new WeakMap,$o=new WeakMap,Io=new WeakMap,Bo=function(){function n(t){var e=this,o=t.container,i=t.commentsModel,a=t.commentsCount;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Mo(this,Wo,{writable:!0,value:null}),Mo(this,Ro,{writable:!0,value:null}),Mo(this,Ao,{writable:!0,value:[]}),Mo(this,$o,{writable:!0,value:null}),Mo(this,Io,{writable:!0,value:function(t){var n,o;switch(t){case"DELETE_COMMENT":r(Co(e,$o)),Lo(e,Ao,(n=Co(e,Ao),--n)),e.init();break;case"ADD_COMMENT":r(Co(e,$o)),Lo(e,Ao,(o=Co(e,Ao),++o)),e.init()}}}),Lo(this,Wo,o),Lo(this,Ro,i),Lo(this,Ao,a),Co(this,Ro).addObserver(Co(this,Io))}var o,i;return o=n,(i=[{key:"init",value:function(){Lo(this,$o,new ko(Co(this,Ao))),e(Co(this,$o),Co(this,Wo),t)}}])&&xo(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),n}();function Fo(t){return Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fo(t)}function No(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Go(r.key),r)}}function Ho(t,e,n){return(e=Go(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Go(t){var e=function(t,e){if("object"!==Fo(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Fo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Fo(e)?e:String(e)}function Yo(t,e){zo(t,e),e.add(t)}function Uo(t,e,n){zo(t,e),e.set(t,n)}function zo(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function qo(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Vo(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Xo(t,e,"get"))}function Ko(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Xo(t,e,"set"),n),n}function Xo(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Zo=new WeakMap,Jo=new WeakMap,Qo=new WeakMap,ti=new WeakMap,ei=new WeakMap,ni=new WeakMap,ri=new WeakMap,oi=new WeakMap,ii=new WeakSet,ai=new WeakSet,ci=new WeakSet,ui=function(){function t(e){var n=this,r=e.container,o=e.commentsModel,i=e.comments,a=e.filmId;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Yo(this,ci),Yo(this,ai),Yo(this,ii),Uo(this,Zo,{writable:!0,value:null}),Uo(this,Jo,{writable:!0,value:null}),Uo(this,Qo,{writable:!0,value:null}),Uo(this,ti,{writable:!0,value:null}),Uo(this,ei,{writable:!0,value:null}),Uo(this,ni,{writable:!0,value:null}),Uo(this,ri,{writable:!0,value:null}),Uo(this,oi,{writable:!0,value:null}),Ho(this,"removeObserver",(function(){Vo(n,ni).removeObserver()})),Ho(this,"handleEnterCommentFormKeydown",(function(){Vo(n,ri).handleEnterCommentFormKeydown()})),Ko(this,Zo,r),Ko(this,Qo,o),Ko(this,ti,i),Ko(this,ei,a)}var n,r;return n=t,(r=[{key:"init",value:function(){Ko(this,Jo,new yr({comments:Vo(this,ti)})),e(Vo(this,Jo),Vo(this,Zo)),qo(this,ii,li).call(this),qo(this,ai,si).call(this),qo(this,ci,fi).call(this)}}])&&No(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function li(){var t,e=Vo(this,Jo).filmAddCommentFormContainer;Ko(this,oi,new Bo({container:e,commentsModel:Vo(this,Qo),commentsCount:(null===(t=Vo(this,ti))||void 0===t?void 0:t.length)||0})),Vo(this,oi).init()}function si(){var t=Vo(this,Jo).commentsContainer;Ko(this,ni,new zr({container:t,commentsModel:Vo(this,Qo),comments:Vo(this,ti)})),Vo(this,ni).init()}function fi(){var t=Vo(this,Jo).filmAddCommentFormContainer;Ko(this,ri,new wo({container:t,commentsModel:Vo(this,Qo),filmId:Vo(this,ei)})),Vo(this,ri).init()}function pi(t){return pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pi(t)}function hi(){hi=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new E(o||[]);return r(a,"_invoke",{value:_(t,n,c)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function h(){}function y(){}var v={};u(v,i,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(P([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,a,c){var u=s(t[r],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==pi(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(g.prototype),u(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function yi(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==pi(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==pi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===pi(o)?o:String(o)),r)}var o}function di(t,e){return di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},di(t,e)}function mi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bi(t){return bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bi(t)}function wi(t,e){_i(t,e),e.add(t)}function gi(t,e,n){_i(t,e),e.set(t,n)}function _i(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Oi(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ji(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ei(t,e,"get"))}function Si(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ei(t,e,"set"),n),n}function Ei(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Pi=new WeakMap,ki=new WeakMap,Ti=new WeakMap,xi=new WeakMap,Mi=new WeakMap,Ci=new WeakMap,Li=new WeakMap,Di=new WeakMap,Wi=new WeakMap,Ri=new WeakMap,Ai=new WeakMap,$i=new WeakSet,Ii=new WeakSet,Bi=new WeakMap,Fi=new WeakMap,Ni=new WeakMap,Hi=new WeakMap,Gi=new WeakMap,Yi=new WeakSet,Ui=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&di(t,e)}(u,t);var n,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bi(i);if(a){var n=bi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===pi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mi(t)}(this,t)});function u(t){var n,r,o,i=t.container,a=t.containerPopup;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),wi(mi(n=c.call(this)),Yi),wi(mi(n),Ii),wi(mi(n),$i),gi(mi(n),Pi,{writable:!0,value:null}),gi(mi(n),ki,{writable:!0,value:null}),gi(mi(n),Ti,{writable:!0,value:null}),gi(mi(n),xi,{writable:!0,value:null}),gi(mi(n),Mi,{writable:!0,value:null}),gi(mi(n),Ci,{writable:!0,value:null}),gi(mi(n),Li,{writable:!0,value:null}),gi(mi(n),Di,{writable:!0,value:[]}),gi(mi(n),Wi,{writable:!0,value:null}),gi(mi(n),Ri,{writable:!0,value:null}),gi(mi(n),Ai,{writable:!0,value:null}),gi(mi(n),Bi,{writable:!0,value:(r=hi().mark((function t(){return hi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ji(mi(n),Di).init(ji(mi(n),Mi));case 2:case"end":return t.stop()}}),t)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){yi(i,n,o,a,c,"next",t)}function c(t){yi(i,n,o,a,c,"throw",t)}a(void 0)}))},function(){return o.apply(this,arguments)})}),gi(mi(n),Fi,{writable:!0,value:function(){ji(mi(n),Bi).call(mi(n)).then((function(){Oi(mi(n),Ii,qi).call(mi(n)),e(ji(mi(n),xi),ji(mi(n),ki)),ji(mi(n),xi).init(),n._notify("OPEN_POPUP",ji(mi(n),Mi))}))}}),gi(mi(n),Ni,{writable:!0,value:function(){n.removePopup(),Oi(mi(n),Yi,Vi).call(mi(n)),document.removeEventListener("keydown",ji(mi(n),Gi)),n._notify("CLOSE_POPUP",ji(mi(n),Mi))}}),gi(mi(n),Hi,{writable:!0,value:function(t){n._notify("WATCHLIST_CLICK",t)}}),gi(mi(n),Gi,{writable:!0,value:function(t){t.preventDefault(),(t.metaKey||t.ctrlKey)&&"Enter"===t.key&&ji(mi(n),Ai).handleEnterCommentFormKeydown()}}),Si(mi(n),Pi,i),Si(mi(n),ki,a),n}return n=u,o=[{key:"init",value:function(t){var n=this,r=t.filmId,o=t.filmsModel,i=t.commentsModel;Si(this,Mi,r),Si(this,Ci,o),Si(this,Li,ji(this,Ci).films.find((function(t){return t.id===ji(n,Mi)}))),Si(this,Di,i),Oi(this,$i,zi).call(this),e(ji(this,Ti),ji(this,Pi))}},{key:"removeView",value:function(){r(ji(this,Ti))}},{key:"removePopup",value:function(){r(ji(this,xi))}}],o&&vi(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),u}(kt);function zi(){Si(this,Ti,new Ce({film:ji(this,Li),onContentCardClick:ji(this,Fi)}));var t=ji(this,Ti).controlButtonContainer;Si(this,Wi,new ar({container:t,filmsModel:ji(this,Ci),film:ji(this,Li),type:R.STANDARD,handleFilmControlButtonClick:ji(this,Hi)})),ji(this,Wi).init()}function qi(){var t=this,e=[];ji(this,Di).comments.forEach((function(t){e.push(t)})),Si(this,xi,new yn({film:ji(this,Ci).films.find((function(e){return e.id===ji(t,Mi)})),comments:e,onPopupCloseButtonClick:ji(this,Ni)}));var n=ji(this,xi).controlButtonContainer,r=ji(this,xi).commentsListContainer;Si(this,Ri,new ar({container:n,filmsModel:ji(this,Ci),film:ji(this,Li),type:R.EXTENDS,handleFilmControlButtonClick:ji(this,Hi)})),Si(this,Ai,new ui({container:r,commentsModel:ji(this,Di),comments:e,filmId:ji(this,Mi)})),ji(this,Ri).init(),ji(this,Ai).init(),document.addEventListener("keydown",ji(this,Gi))}function Vi(){ji(this,Ai).removeObserver()}function Ki(t){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ki(t)}function Xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ea(r.key),r)}}function Zi(t,e){return Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zi(t,e)}function Ji(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qi(t){return Qi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qi(t)}function ta(t,e,n){return(e=ea(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ea(t){var e=function(t,e){if("object"!==Ki(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ki(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ki(e)?e:String(e)}var na=new WeakSet,ra=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zi(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qi(r);if(o){var n=Qi(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ki(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ji(t)}(this,t)});function a(t){var e,n,r,o=t.handleButtonShowMoreButtonClick;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=Ji(e=i.call(this)),r=na),r.add(n),ta(Ji(e),"handleButtonShowMoreButtonClick",null),ta(Ji(e),"onButtonShowMoreViewClick",(function(t){t.preventDefault(),e.handleButtonShowMoreButtonClick()})),e.handleButtonShowMoreButtonClick=o,function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(Ji(e),na,oa).call(Ji(e)),e}return e=a,(n=[{key:"template",get:function(){return'\n    <button class="films-list__show-more">Show more</button>\n  '}}])&&Xi(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(E);function oa(){this.element.addEventListener("click",this.onButtonShowMoreViewClick)}function ia(t){return ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ia(t)}function aa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sa(r.key),r)}}function ca(t,e){return ca=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ca(t,e)}function ua(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function la(t){return la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},la(t)}function sa(t){var e=function(t,e){if("object"!==ia(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ia(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ia(e)?e:String(e)}function fa(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function pa(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ya(t,e,"get"))}function ha(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ya(t,e,"set"),n),n}function ya(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var va=new WeakMap,da=new WeakMap,ma=new WeakMap,ba=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ca(t,e)}(u,t);var n,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=la(i);if(a){var n=la(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ia(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ua(t)}(this,t)});function u(t){var e,n,r,o,i=t.container;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),fa(ua(e=c.call(this)),va,{writable:!0,value:null}),fa(ua(e),da,{writable:!0,value:1}),fa(ua(e),ma,{writable:!0,value:null}),n=ua(e),o=function(){var t;ha(ua(e),da,(t=pa(ua(e),da),++t)),e._notify("ADD_FILMS",pa(ua(e),da))},(r=sa(r="handleButtonShowMoreButtonClick"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,ha(ua(e),va,i),e}return n=u,o=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;ha(this,ma,new ra({handleButtonShowMoreButtonClick:this.handleButtonShowMoreButtonClick})),ha(this,da,t),e(pa(this,ma),pa(this,va))}},{key:"removeView",value:function(){r(pa(this,ma))}}],o&&aa(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),u}(kt);function wa(t){return wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(t)}function ga(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==wa(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==wa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===wa(o)?o:String(o)),r)}var o}function _a(t,e){ja(t,e),e.add(t)}function Oa(t,e,n){ja(t,e),e.set(t,n)}function ja(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sa(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function Ea(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ka(t,e,"get"))}function Pa(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ka(t,e,"set"),n),n}function ka(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ta=new WeakMap,xa=new WeakMap,Ma=new WeakMap,Ca=new WeakMap,La=new WeakMap,Da=new WeakMap,Wa=new WeakMap,Ra=new WeakMap,Aa=new WeakMap,$a=new WeakMap,Ia=new WeakSet,Ba=new WeakMap,Fa=new WeakMap,Na=new WeakSet,Ha=new WeakSet,Ga=new WeakMap,Ya=function(){function t(e){var n=this,r=e.container,o=e.containerPopup;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_a(this,Ha),_a(this,Na),_a(this,Ia),Oa(this,Ta,{writable:!0,value:null}),Oa(this,xa,{writable:!0,value:null}),Oa(this,Ma,{writable:!0,value:null}),Oa(this,Ca,{writable:!0,value:new Map}),Oa(this,La,{writable:!0,value:null}),Oa(this,Da,{writable:!0,value:[]}),Oa(this,Wa,{writable:!0,value:null}),Oa(this,Ra,{writable:!0,value:1}),Oa(this,Aa,{writable:!0,value:null}),Oa(this,$a,{writable:!0,value:null}),Oa(this,Ba,{writable:!0,value:function(t,e){Pa(n,Ra,e),n.removeCards(),n.renderCards()}}),Oa(this,Fa,{writable:!0,value:function(t,e){switch(t){case"OPEN_POPUP":Sa(n,Na,za).call(n,e);break;case"CLOSE_POPUP":Sa(n,Ha,qa).call(n,e);break;case"WATCHLIST_CLICK":Ea(n,Da).update(e)}}}),Oa(this,Ga,{writable:!0,value:function(t){t.preventDefault(),"Escape"===t.key&&(Sa(n,Ha,qa).call(n,Ea(n,Aa)),document.removeEventListener("keydown",Ea(n,Ga)))}}),Pa(this,Ta,r),Pa(this,xa,o)}var n,r;return n=t,r=[{key:"init",value:function(t){var n=t.filmsModel,r=t.commentsModel;Pa(this,Da,n),Pa(this,Wa,r),Pa(this,Ma,new ve),e(Ea(this,Ma),Ea(this,Ta)),this.render()}},{key:"render",value:function(){this.renderCards(),Sa(this,Ia,Ua).call(this),Ea(this,La).addObserver(Ea(this,Ba))}},{key:"renderCards",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ea(this,Da).films,e=Ea(this,Ma).containerFilms,n=Math.min(5*Ea(this,Ra),t.length),r=0;r<n;r++){var o=new Ui({container:e,containerPopup:Ea(this,xa)});Ea(this,Ca).set(t[r].id,o),o.init({filmId:t[r].id,filmsModel:Ea(this,Da),commentsModel:Ea(this,Wa)}),Ea(this,Ca).get(t[r].id).addObserver(Ea(this,Fa))}5*Ea(this,Ra)>=t.length&&Ea(this,La).removeView()}},{key:"removeCards",value:function(){Ea(this,Ca).forEach((function(t){return t.removeView()})),Ea(this,Ca).clear()}},{key:"resetDisplayFilmsCount",value:function(){Ea(this,La).removeView(),Ea(this,La).init(),Pa(this,Ra,1)}}],r&&ga(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function Ua(){var t=Ea(this,Ma).containerShowMoreButton;Pa(this,La,new ba({container:t})),Ea(this,La).init()}function za(t){if(Ea(this,Aa)!==t){if(null===Ea(this,Aa))return Pa(this,$a,Ea(this,Ca).get(t)),Pa(this,Aa,t),void document.addEventListener("keydown",Ea(this,Ga));Ea(this,$a).removePopup(),Pa(this,$a,Ea(this,Ca).get(t)),Pa(this,Aa,t)}}function qa(t){Ea(this,Ca).get(t).removePopup(),Pa(this,Aa,null)}function Va(t){return Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(t)}function Ka(){Ka=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new E(o||[]);return r(a,"_invoke",{value:_(t,n,c)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function h(){}function y(){}var v={};u(v,i,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(P([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,a,c){var u=s(t[r],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==Va(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(g.prototype),u(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Xa(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Za(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Xa(i,r,o,a,c,"next",t)}function c(t){Xa(i,r,o,a,c,"throw",t)}a(void 0)}))}}function Ja(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Va(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Va(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Va(o)?o:String(o)),r)}var o}function Qa(t,e){return Qa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qa(t,e)}function tc(t){return tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tc(t)}var ec=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qa(t,e)}(c,t);var e,n,r,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=tc(o);if(i){var n=tc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Va(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),a.apply(this,arguments)}return e=c,n=[{key:"getComments",value:function(t){return this._load({url:"comments/".concat(t)}).then(Kt.parseResponse)}},{key:"addComment",value:function(){var t=Za(Ka().mark((function t(e){var n,r,o;return Ka().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filmId,r=e.comment,t.next=3,this._load({url:"comments/".concat(n),method:"POST",body:JSON.stringify(r),headers:new Headers({"Content-Type":"application/json"})});case 3:return o=t.sent,t.next=6,Kt.parseResponse(o);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteComment",value:(r=Za(Ka().mark((function t(e){var n;return Ka().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._load({url:"comments/".concat(e),method:"DELETE",headers:new Headers({"Content-Type":"application/json"})});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"adaptToClient",value:function(t){return t}}],n&&Ja(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(Kt);function nc(t){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(t)}function rc(){rc=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new E(o||[]);return r(a,"_invoke",{value:_(t,n,c)}),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var f={};function p(){}function h(){}function y(){}var v={};u(v,i,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(P([])));m&&m!==e&&n.call(m,i)&&(v=m);var b=y.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,a,c){var u=s(t[r],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==nc(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function P(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:h,configurable:!0}),h.displayName=u(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(g.prototype),u(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=P,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function oc(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ic(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ic(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function ic(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ac(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function cc(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ac(i,r,o,a,c,"next",t)}function c(t){ac(i,r,o,a,c,"throw",t)}a(void 0)}))}}function uc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==nc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===nc(o)?o:String(o)),r)}var o}function lc(t,e){return lc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lc(t,e)}function sc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fc(t){return fc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fc(t)}function pc(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function hc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,yc(t,e,"get"))}function yc(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var vc=new WeakMap,dc=new WeakMap,mc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lc(t,e)}(u,t);var e,n,r,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=fc(i);if(a){var n=fc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sc(t)}(this,t)});function u(t){var e,n,r,o=t.commentsApiService;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),pc(sc(e=c.call(this)),vc,{writable:!0,value:new Map}),pc(sc(e),dc,{writable:!0,value:null}),n=sc(e),r=o,function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(n,yc(n,dc,"set"),r),e}return e=u,n=[{key:"init",value:(o=cc(rc().mark((function t(e){var n,r,o,i;return rc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hc(this,dc).getComments(e);case 2:n=t.sent,hc(this,vc).clear(),r=oc(n);try{for(r.s();!(o=r.n()).done;)i=o.value,hc(this,vc).set(i.id,hc(this,dc).adaptToClient(i))}catch(t){r.e(t)}finally{r.f()}case 6:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"comments",get:function(){return hc(this,vc)}},{key:"addComment",value:function(){var t=cc(rc().mark((function t(e){var n,r,o,i,a,c;return rc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.filmId,r=e.comment,t.next=3,hc(this,dc).addComment({filmId:n,comment:r});case 3:o=t.sent,hc(this,vc).clear(),i=oc(o.comments);try{for(i.s();!(a=i.n()).done;)c=a.value,hc(this,vc).set(c.id,hc(this,dc).adaptToClient(c))}catch(t){i.e(t)}finally{i.f()}this._notify("ADD_COMMENT",hc(this,vc));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"deleteComment",value:(r=cc(rc().mark((function t(e){return rc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,hc(this,dc).deleteComment(e);case 2:t.sent,hc(this,vc).delete(e),this._notify("DELETE_COMMENT",e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}],n&&uc(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(kt);function bc(t){return bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(t)}function wc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==bc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===bc(o)?o:String(o)),r)}var o}function gc(t,e){return gc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gc(t,e)}function _c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oc(t){return Oc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oc(t)}function jc(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Sc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ec(t,e,"get"))}function Ec(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Pc=new WeakMap,kc=new WeakMap,Tc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gc(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Oc(r);if(o){var n=Oc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _c(t)}(this,t)});function a(t){var e,n,r,o=t.handleSort;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),jc(_c(e=i.call(this)),Pc,{writable:!0,value:null}),jc(_c(e),kc,{writable:!0,value:function(t){t.preventDefault(),""!==t.target.id&&(e.updateElement({type:t.target.id}),Sc(_c(e),Pc).call(_c(e),t.target.id))}}),e._state={type:"default"},n=_c(e),r=o,function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(n,Ec(n,Pc,"set"),r),e._restoreHandlers(),e}return e=a,(n=[{key:"template",get:function(){return e="date"===(t=this._state).type,n="rating"===t.type,r="default"===t.type,'\n    <ul class="sort">\n      <li><a href="#" class="sort__button '.concat(r?"sort__button--active":"",'" id="default">Sort by default</a></li>\n      <li><a href="#" class="sort__button ').concat(e?"sort__button--active":"",'" id="date">Sort by date</a></li>\n      <li><a href="#" class="sort__button ').concat(n?"sort__button--active":"",'" id="rating">Sort by rating</a></li>\n    </ul>');var t,e,n,r}},{key:"_restoreHandlers",value:function(){this.element.addEventListener("click",Sc(this,kc))}}])&&wc(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ge);function xc(t){return xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(t)}function Mc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==xc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===xc(o)?o:String(o)),r)}var o}function Cc(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Lc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Wc(t,e,"get"))}function Dc(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Wc(t,e,"set"),n),n}function Wc(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Rc=new WeakMap,Ac=new WeakMap,$c=new WeakMap,Ic=new WeakMap,Bc=new WeakMap,Fc=function(){function n(t){var e=this,r=t.container;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),Cc(this,Rc,{writable:!0,value:null}),Cc(this,Ac,{writable:!0,value:null}),Cc(this,$c,{writable:!0,value:null}),Cc(this,Ic,{writable:!0,value:null}),Cc(this,Bc,{writable:!0,value:function(t){var n=null;switch(t){case"date":n=function(t,e){return B()(e.filmInfo.release.date)-B()(t.filmInfo.release.date)};break;case"rating":n=function(t,e){return e.filmInfo.totalRating-t.filmInfo.totalRating};break;case"default":n=function(t,e){return t.id-e.id};break;default:return}Lc(e,$c).getSortingFilms(n),Lc(e,Ic).removeCards(),Lc(e,Ic).resetDisplayFilmsCount(),Lc(e,Ic).renderCards()}}),Dc(this,Rc,r)}var r,o;return r=n,o=[{key:"init",value:function(n){var r=n.filmsModel,o=n.filmListPresenter;Dc(this,$c,r),Dc(this,Ic,o),Dc(this,Ac,new Tc({handleSort:Lc(this,Bc)})),e(Lc(this,Ac),Lc(this,Rc),t)}}],o&&Mc(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),n}();function Nc(t){return Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nc(t)}function Hc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Nc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Nc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Nc(o)?o:String(o)),r)}var o}function Gc(t,e){return Gc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gc(t,e)}function Yc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uc(t){return Uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uc(t)}function zc(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function qc(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Vc(t,e,"get"))}function Vc(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Kc=new WeakMap,Xc=new WeakMap,Zc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gc(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Uc(r);if(o){var n=Uc(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Nc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yc(t)}(this,t)});function a(t){var e,n,r,o=t.handleFiltersClick;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),zc(Yc(e=i.call(this)),Kc,{writable:!0,value:null}),zc(Yc(e),Xc,{writable:!0,value:function(t){t.preventDefault(),qc(Yc(e),Kc).call(Yc(e),t.target.id)}}),e._state={type:"all",countWatchlistFilms:0,countWatchedFilms:0,countFavoriteFilms:0},n=Yc(e),r=o,function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(n,Vc(n,Kc,"set"),r),e._restoreHandlers(),e}return e=a,(n=[{key:"init",value:function(t){var e=t.countWatchlistFilms,n=t.countWatchedFilms,r=t.countFavoriteFilms;this.updateElement({countWatchlistFilms:e,countWatchedFilms:n,countFavoriteFilms:r})}},{key:"_restoreHandlers",value:function(){this.element.addEventListener("click",qc(this,Xc))}},{key:"template",get:function(){return t=this._state,'\n    <nav class="main-navigation">\n      <a href="#all" id="all" class="main-navigation__item main-navigation__item--active">All movies</a>\n      <a href="#watchlist" id="watchlist" class="main-navigation__item">Watchlist <span\n        class="main-navigation__item-count">'.concat((null==t?void 0:t.countWatchlistFilms)||0,'</span></a>\n      <a href="#history" id="history" class="main-navigation__item">History <span\n        class="main-navigation__item-count">').concat((null==t?void 0:t.countWatchedFilms)||0,'</span></a>\n      <a href="#favorites" id="favorites" class="main-navigation__item">Favorites <span\n        class="main-navigation__item-count">').concat((null==t?void 0:t.countFavoriteFilms)||0,"</span></a>\n    </nav>\n  ");var t}}])&&Hc(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(Ge);function Jc(t){return Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jc(t)}function Qc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Jc(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Jc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Jc(o)?o:String(o)),r)}var o}function tu(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function eu(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,ru(t,e,"get"))}function nu(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,ru(t,e,"set"),n),n}function ru(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ou=new WeakMap,iu=new WeakMap,au=new WeakMap,cu=new WeakMap,uu=new WeakMap,lu=new WeakMap,su=new WeakMap,fu=new WeakMap,pu=new WeakMap,hu=function(){function n(o){var i=this,a=o.container;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),tu(this,ou,{writable:!0,value:null}),tu(this,iu,{writable:!0,value:null}),tu(this,au,{writable:!0,value:null}),tu(this,cu,{writable:!0,value:null}),tu(this,uu,{writable:!0,value:null}),tu(this,lu,{writable:!0,value:"all"}),tu(this,su,{writable:!0,value:function(n){"UPDATE_FILM"===n&&(r(eu(i,iu)),nu(i,iu,new Zc({handleFiltersClick:eu(i,pu)})),eu(i,iu).init(i.countCountFilmsByFilters),e(eu(i,iu),eu(i,ou),t))}}),tu(this,fu,{writable:!0,value:function(t){"UPDATE_FILM"===t&&eu(i,pu).call(i,eu(i,lu))}}),tu(this,pu,{writable:!0,value:function(t){var e=null;switch(nu(i,lu,t),t){case"watchlist":e=function(t){return t.userDetails.watchlist};break;case"history":e=function(t){return t.userDetails.watched};break;case"favorites":e=function(t){return t.userDetails.favorite};break;case"all":e=function(){return!0};break;default:return}nu(i,uu,eu(i,cu).getFilterFilms(e)),eu(i,au).removeCards(),eu(i,au).resetDisplayFilmsCount(),eu(i,au).renderCards(eu(i,uu))}}),nu(this,ou,a)}var o,i;return o=n,i=[{key:"init",value:function(n){var r=n.filmsModel,o=n.filmListPresenter;nu(this,cu,r),nu(this,au,o),nu(this,iu,new Zc({handleFiltersClick:eu(this,pu)})),eu(this,iu).init(this.countCountFilmsByFilters),e(eu(this,iu),eu(this,ou),t),eu(this,cu).addObserver(eu(this,su)),eu(this,cu).addObserver(eu(this,fu))}},{key:"countCountFilmsByFilters",get:function(){var t=0,e=0,n=0;return eu(this,cu).films.forEach((function(r){r.userDetails.watchlist&&t++,r.userDetails.watched&&e++,r.userDetails.favorite&&n++})),{countWatchlistFilms:t,countWatchedFilms:e,countFavoriteFilms:n}}}],i&&Qc(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),n}(),yu=new Yt({filmsApiService:new le($,A)}),vu=new mc({commentsApiService:new ec($,A)}),du=document.querySelector(".header"),mu=document.querySelector(".footer__statistics"),bu=document.querySelector("body"),wu=document.querySelector(".main"),gu=new rt({container:du,filmsModel:yu}),_u=new hu({container:wu}),Ou=new Fc({container:wu}),ju=new Ot({container:mu,filmsModel:yu}),Su=new Ya({container:wu,containerPopup:bu});yu.init().then((function(){gu.init(),Ou.init({filmsModel:yu,filmListPresenter:Su}),_u.init({filmsModel:yu,filmListPresenter:Su}),Su.init({filmsModel:yu,commentsModel:vu}),ju.init({numberOfFilms:1035})}))})()})();
//# sourceMappingURL=bundle.45467c2937e1a4a60d25.js.map